<div class="container">

  <div class="grid">
    <div class="header">
      <div class="subsession-info" *ngIf="dataService.subsessionInfo.subsession_id !== 0">
        <div>Current subsession: <span style="font-weight: bold">{{dataService.subsessionInfo.subsession_id}}</span></div>
        <div class="subsession-wrapper">
        <div class="subsession">
        <span class="time">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
            <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
          </svg>
          <span title="Date">{{dataService.subsessionInfo.session_start_time}}</span>
        </span>
        <span class="series">
          <svg fill="currentColor" height="16px" width="16px" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
               viewBox="0 0 512 512" xml:space="preserve">
          <g>
            <g>
              <path d="M256,0C114.842,0,0,114.842,0,256s114.842,256,256,256s256-114.842,256-256S397.158,0,256,0z M231.226,460.96
                C137.152,449.658,62.342,374.848,51.04,280.774h143.717c6.704,16.554,19.915,29.767,36.469,36.469V460.96z M194.757,231.226H51.04
                C63.318,129.027,150.546,49.548,256,49.548s192.682,79.479,204.96,181.677H317.243c-9.802-24.208-33.521-41.29-61.243-41.29
                C228.278,189.935,204.559,207.018,194.757,231.226z M280.774,460.96V317.243c16.554-6.704,29.767-19.915,36.469-36.469H460.96
                C449.658,374.848,374.848,449.658,280.774,460.96z"/>
            </g>
          </g>
          </svg>
          <span title="Series">{{dataService.subsessionInfo.series_name}}</span>
        </span>
        <span class="track">
          <svg fill="currentColor" width="16px" height="16px" viewBox="0 0 3334 3334" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
            <g>
              <g><path d="M746.994,360.016c-70.221,-40.137 -158.446,-62.265 -248.474,-62.265c-99.844,0 -194.051,26.598 -265.146,74.983c-153.222,104.145 -233.374,361.334 -233.374,561.544l0,1100.31c0,217.569 109.598,503.749 254.863,665.56l39.961,44.607c148.806,165.776 429.052,290.827 651.857,290.827l1915.37,-0c264.278,-0 471.278,-162.229 471.278,-369.351c0,-197.592 -177.08,-415.757 -343.725,-520.715l-181.806,-114.421c-118.071,-74.406 -241.798,-251.383 -264.727,-378.808c-37.938,-211.016 -174.25,-429.806 -317.14,-508.858c-71.964,-39.846 -158.099,-61.803 -242.6,-61.803c-93.636,0 -178.434,27.066 -238.664,76.319c-90.374,73.708 -193.759,219.027 -240.401,337.919c-28.286,72.08 -126.441,234.364 -222.045,352.095c-42.05,51.641 -107.394,71.096 -141.955,39.147c-61.335,-56.634 -129.928,-232.153 -129.928,-382.356l0,-584.017c0,-198.922 -92.294,-463.024 -263.348,-560.717Zm172.968,1334.62l-56.282,14.523c-18.064,-70.106 -27.648,-140.794 -27.648,-204.34l-0,-95.197l58.079,-0l-0,95.197c0.067,58.778 8.953,124.413 25.851,189.817Zm-34.385,-878.203c5.697,35.314 8.54,70.397 8.54,104.314l-0,194.397l-58.079,0l-0,-194.397c-0,-30.843 -2.612,-62.786 -7.842,-95.082l57.381,-9.232Zm-387.002,-402.515c70.166,-0 137.945,16.667 190.856,46.927c28.055,16.036 55.06,40.313 80.097,72.201l-45.652,35.891c-20.445,-25.96 -41.704,-45.36 -63.254,-57.672c-44.316,-25.322 -101.818,-39.262 -162.053,-39.262l-12.652,0.176l-1.798,-58.024l14.456,-0.237Zm-284.079,149.328l49.545,30.261c-42.688,69.874 -74.637,169.542 -85.552,266.482l-57.733,-6.45c11.966,-106.574 46.114,-212.346 93.74,-290.293Zm-98.332,587.911l58.08,-0l-0,294.477l-58.08,0l0,-294.477Zm0,588.949l58.08,-0l-0,294.477l-58.08,0l0,-294.477Zm171.863,813.795c-51.865,-76.374 -97.693,-173.369 -129.114,-273.104l55.413,-17.426c29.738,94.505 72.954,186.1 121.74,257.894l-48.039,32.636Zm489.755,341.053c-96.011,-25.839 -193.935,-70.337 -275.775,-125.215l32.41,-48.215c76.666,51.464 168.437,93.162 258.465,117.385l-15.1,56.045Zm594.471,24.52l-294.478,0l0,-58.079l294.478,-0l-0,58.079Zm588.949,0l-294.472,0l0,-58.079l294.472,-0l-0,58.079Zm588.961,0l-294.477,0l-0,-58.079l294.477,-0l0,58.079Zm311.953,0l-17.433,0l0,-58.079l17.433,-0c94.219,-0 180.925,-28.876 238.026,-79.235l38.387,43.563c-67.548,59.536 -168.315,93.751 -276.413,93.751Zm125.403,-632.803c81.488,65.344 151.587,151.709 192.362,237.024l-52.388,25.031c-37.106,-77.656 -101.35,-156.642 -176.218,-216.707l36.244,-45.348Zm-446.187,-363.314c58.249,84.635 128.239,156.131 197.069,201.321l-31.888,48.556c-74.989,-49.254 -150.664,-126.272 -213.05,-216.883l47.869,-32.994Zm-231.06,-537.254c56.634,84.1 99.376,186.501 117.325,280.885l-57.041,10.866c-16.551,-87.01 -56.044,-181.508 -108.432,-259.285l48.148,-32.466Zm-492.179,-138.121c54.715,-44.607 149.444,-60.989 242.6,-42.342l-11.376,56.98c-75.566,-15.1 -153.744,-2.903 -194.519,30.436c-13.939,11.328 -28.924,25.73 -44.667,42.925l-42.864,-39.262c17.657,-19.291 34.73,-35.672 50.826,-48.737Zm-43.501,354.008c28.28,-72.08 101.526,-176.454 153.616,-218.966c3.724,-2.849 21.781,-10.921 55.127,-10.921c35.6,-0 72.767,9.238 101.928,25.438c52.971,29.331 146.248,163.152 171.978,306.261c37.464,208.221 207.595,454.611 395.779,573.157l181.733,114.421c125.111,78.761 208.057,217.691 208.057,274.968c-0,20.275 -62.21,78.925 -180.864,78.925l-1915.32,-0c-139.166,-0 -342.741,-90.836 -435.673,-194.342l-40.021,-44.608c-96.181,-107.217 -180.573,-327.58 -180.573,-471.679l0,-1100.31c0,-154.558 68.77,-295.93 106.234,-321.367c17.596,-11.966 53.609,-24.746 101.933,-24.746c39.669,0 77.71,8.716 104.375,23.986c46.581,26.604 116.978,163.268 116.978,308.594l0,584.078c0,222.106 96.011,478.19 223.328,595.691c64.876,59.883 149.911,92.877 239.587,92.877c122.554,-0 240.923,-59.185 324.738,-162.29c107.035,-131.665 224.305,-320.152 267.06,-429.168Zm-168.273,-48.962l53.317,23.057c-29.04,66.965 -85.436,163.857 -151.011,259.103l-47.856,-32.933c62.61,-90.891 118.43,-186.38 145.55,-249.227Zm-568.043,394.959c7.55,9.062 15.276,17.25 23.118,24.508c54.015,49.777 134.635,60.169 208.92,27.71l23.232,53.256c-36.127,15.744 -73.415,23.762 -110.764,23.762c-61.22,-0 -116.802,-21.435 -160.772,-62.034c-9.639,-8.886 -19.108,-18.932 -28.347,-29.981l44.613,-37.221Z" style="fill-rule:nonzero;"/><rect x="91.667" y="1108.33" width="125" height="425"/><rect x="812.5" y="1320.83" width="125" height="425"/><rect x="91.667" y="1108.33" width="125" height="425"/><path d="M1029.17,2833.33l-0,125l1612.5,0l-0,-125l-1612.5,0Z"/><path d="M464.267,2612.94l-62.5,108.254l410.733,237.136l62.5,-108.253l-410.733,-237.137Z"/><path d="M202.734,2175.43l-111.067,57.35l217.599,421.41l111.067,-57.35l-217.599,-421.41Z"/><path d="M234.619,1643.12l-124.91,-4.755l-18.042,473.93l124.909,4.755l18.043,-473.93Z"/><path d="M946.476,768.124l-124.909,-4.755l-18.043,473.93l124.909,4.755l18.043,-473.93Z"/><path d="M2517.82,1842.63l-94.554,81.759l310.209,358.756l94.554,-81.759l-310.209,-358.756Z"/><path d="M2331.62,1358.88l-117.843,41.691l158.181,447.117l117.843,-41.69l-158.181,-447.118Z"/><path d="M2117.01,1277.62l-75.641,-177.258l-332.05,141.696l75.641,177.258l332.05,-141.696Z"/><path d="M1759.87,1538.77l-164.909,-99.734l-216.986,358.784l164.909,99.734l216.986,-358.784Z"/><path d="M1273.45,2143.21l36.439,-163.084l-326.974,-73.058l-36.439,163.084l326.974,73.058Z"/></g><path d="M3134.18,2621.5l135.124,-137.416l-298.97,-293.984l-135.124,137.416l298.97,293.984Z"/><path d="M3173.81,2904.13l-42.454,-187.988l-408.996,92.365l42.454,187.988l408.996,-92.365Z"/><path d="M353.858,547.768l-180.341,-67.963l-147.864,392.359l180.341,67.963l147.864,-392.359Z"/><path d="M715.948,641.092l91.565,-169.581l-283.351,-152.994l-91.565,169.581l283.351,152.994Z"/></g></svg>
          <span title="Track">{{dataService.subsessionInfo.track_name}}</span>
        </span>
        <span class="sof">
          <svg fill="currentColor" width="16px" height="16px" viewBox="0 0 32 32" id="icon" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <style>
                .cls-1 {
                  fill: none;
                }
              </style>
            </defs>
            <path d="M30,30H22V4h8Zm-6-2h4V6H24Z"/>
            <path d="M20,30H12V12h8Z"/>
            <path d="M10,30H2V18h8Z"/>
            <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>
          </svg>
          <span title="Strength of Field (SOF)">{{dataService.subsessionInfo.sof}}</span>
        </span>
        <span class="start">
          <svg fill="currentColor" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g><path d="M16,7l0,-1l-7,0l0,1l7,0Z"/><rect x="9" y="7" width="1" height="4"/><rect x="15" y="7" width="1" height="4"/></g><g><path d="M7,4l0,-1l-7,0l0,1l7,-0Z"/><rect x="0" y="4" width="1" height="4"/><rect x="6" y="4" width="1" height="4"/></g></svg>
          <span title="Starting Position">{{dataService.subsessionInfo.start_position}}</span>

        </span>
        <span class="finish">
          <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 450 450" xml:space="preserve">
            <g>
              <g>
                <path d="M87.945,75.913c-1.877-7.41-9.408-11.893-16.818-10.018c-7.413,1.879-11.897,9.409-10.019,16.821l90.439,356.838
                  c1.589,6.271,7.224,10.446,13.409,10.446c1.127,0,2.271-0.139,3.413-0.428c7.409-1.877,11.895-9.409,10.017-16.819L87.945,75.913z
                  "/>
                <path d="M388.98,176.419c-14.739-54.423-29.492-108.842-44.234-163.265c-1.598-5.891-4.399-12.21-14.929-12.842
                  C246.929-5.691,192.503,76.854,109.614,70.85c-6.541-0.806-10.745,2.6-9.148,8.491c14.743,54.422,29.372,108.877,44.233,163.266
                  c2.385,8.729,8.388,12.035,14.931,12.842c82.887,6.004,137.315-76.541,220.205-70.537
                  C386.375,185.716,390.577,182.311,388.98,176.419z M323.934,20.857c4.066,15.015,8.138,30.029,12.204,45.044
                  c-17.436,0.574-32.825,4.092-49.132,10.203c-4.065-15.015-8.137-30.03-12.202-45.044C291.109,24.951,306.498,21.43,323.934,20.857
                  z M153.13,189.197c-4.627-17.059-9.246-34.122-13.868-51.182c18.328-0.531,34.591-4.503,51.602-11.227
                  c-4.07-15.015-8.138-30.03-12.204-45.045c16.629-7.433,32.314-16.332,48.022-25.523c4.066,15.014,8.138,30.029,12.205,45.044
                  c-15.709,9.19-31.395,18.092-48.023,25.524c4.623,17.06,9.244,34.122,13.866,51.182
                  C187.718,184.693,171.457,188.665,153.13,189.197z M217.114,223.674c-4.129-15.234-8.256-30.47-12.384-45.706
                  c16.513-7.377,32.087-16.201,47.683-25.327c4.128,15.236,8.256,30.471,12.383,45.707
                  C249.202,207.475,233.626,216.297,217.114,223.674z M252.75,152.445c-4.619-17.061-9.242-34.122-13.863-51.183
                  c15.706-9.17,31.403-17.945,48.119-25.157c4.624,17.06,9.246,34.121,13.867,51.181C284.16,134.5,268.458,143.274,252.75,152.445z
                   M313.545,172.876c-4.129-15.234-8.256-30.47-12.385-45.706c16.211-6.045,31.521-9.521,48.843-10.086
                  c4.129,15.236,8.257,30.471,12.386,45.705C345.066,163.355,329.754,166.83,313.545,172.876z"/>
              </g>
            </g>
        </svg>
          <span title="Finish Position">{{dataService.subsessionInfo.finish_position}}</span>
        </span>

        <span class="laps">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
          </svg>
          <span title="Laps">{{laps | async}}</span>
        </span>


        </div>
      </div>
      </div>
      <div class="subsession-info" *ngIf="dataService.subsessionInfo.subsession_id === 0">
        <span>Choose a race first</span>
      </div>
    </div>

    <div class="options">

      <div class="mode" (click)="showMenu()">
        <div class="text">{{selectedMode.label}}</div>
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" viewBox="0 0 16 16">
          <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
        </svg>
        <div class="select" *ngIf="_showMenu">
            <div class="option" *ngFor="let m of modes" (click)="selectMode(m)">{{m.label}}</div>
        </div>
      </div>

      <div class="options-wrapper">
        <div class="option1" *ngIf="selectedMode.mode === ModeType.Boxplot">
          <ul class="ul-first">
            <li *ngFor="let opt of options | keyvalue">

              <div class="cbContainer_main">

              <input type="checkbox" id={{opt.key}} [checked]="opt.value.checked" #bp_opt (change)="onOptionsChange(opt.key, bp_opt.checked, 'opt_bp')">
              <span class="checkmark"></span><label for={{opt.key}}>{{opt.value.label}}</label>

              <span *ngIf="opt.value.suboptions">
                      <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" viewBox="0 0 16 16"><path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/></svg>
              </span>

              </div>

              <ul *ngIf="opt.value.suboptions && _showSub" class="ul-second">
                <li *ngFor="let sub of opt.value.suboptions | keyvalue">

                  <div class="cbContainer_sub">
                  <input type="checkbox" id={{sub.key}} [checked]="sub.value?.checked" #bp_sub (change)="onSubOptionsChange(opt.key, sub!.key, bp_sub.checked, 'opt_bp')">
                  <span class="checkmark"></span><label for={{sub.key}}>{{sub.value?.label}}</label>
                  </div>
                </li>
              </ul>

            </li>

          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="footer" (click)="showDiagramSettings()">

    <div class="diasettings-button">
      <div class="text"> Diagram Settings </div>
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16"><path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/></svg>
    </div>
  </div>

</div>










